<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just for You</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            text-align: center;
            padding: 20px;
            color: #333;
        }

        #message-container {
            max-width: 800px;
            width: 100%;
            animation: fadeIn 2s ease-in;
        }

        h1 {
            font-size: 3rem;
            font-weight: 300;
            line-height: 1.4;
            margin-bottom: 30px;
            white-space: pre-wrap;
        }

        .heart {
            color: #e25555;
            font-size: 2rem;
            margin-top: 20px;
        }

        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #e25555;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        /* Error message style */
        #debug-log {
            color: red;
            font-size: 0.9rem;
            margin-top: 20px;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 5px;
            display: none; /* Hidden by default */
            font-family: monospace;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <div id="message-container">
        <div id="loader" class="loader"></div>
        
        <h1 id="uplifting-message" style="display:none;"></h1>
        
        <div id="debug-log"></div>
        
        <div class="heart">â™¥</div>
    </div>

    <script>
        // Use an IIFE (Immediately Invoked Function Expression) to keep scope clean
        (function() {
            // Your exact Google Sheet Link
            const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vS1wd3eM8z1RMgPfrmWtgtt4lsKChH9x1bn0lYLSljJyEvlGbeECSoKKjeNQRIwR-ZRm8QzIrE16tNq/pub?output=csv";

            function showError(msg) {
                const loader = document.getElementById('loader');
                const debugLog = document.getElementById('debug-log');
                if (loader) loader.style.display = 'none';
                if (debugLog) {
                    debugLog.innerText = "Error: " + msg;
                    debugLog.style.display = 'block';
                }
            }

            // Fetch Data
            fetch(sheetUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok: " + response.status);
                    }
                    return response.text();
                })
                .then(data => {
                    // Filter lines
                    const messages = data.split('\n')
                        .filter(line => line.trim() !== '')
                        .map(line => {
                            // Clean quotes
                            let cleanLine = line.trim();
                            if (cleanLine.startsWith('"') && cleanLine.endsWith('"')) {
                                cleanLine = cleanLine.slice(1, -1).replace(/""/g, '"');
                            }
                            return cleanLine;
                        });

                    if (messages.length > 0) {
                        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                        
                        document.getElementById('loader').style.display = 'none';
                        const msgElement = document.getElementById('uplifting-message');
                        msgElement.innerText = randomMessage;
                        msgElement.style.display = 'block';
                    } else {
                        throw new Error("Google Sheet appears empty or unreadable.");
                    }
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    // Show error on screen so user can see it
                    showError(error.message);
                    
                    // Optional: Show a fallback message anyway so the site isn't broken
                    const msgElement = document.getElementById('uplifting-message');
                    msgElement.innerText = "You are doing better than you think.";
                    msgElement.style.display = 'block';
                });
        })();
    </script>

</body>
</html>
