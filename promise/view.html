<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinky Swear | jtdj.love</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --bg: #fdf6e3; --text: #586e75; --accent: #d33682; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: var(--text); display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; text-align: center; overflow-x: hidden; }
        .container { background: white; padding: 2.5rem; border-radius: 35px; box-shadow: 0 15px 40px rgba(0,0,0,0.04); max-width: 500px; width: 90%; position: relative; z-index: 10; }
        
        .animation-area { height: 320px; position: relative; display: flex; justify-content: center; align-items: center; }

        /* --- THE MASTER ANIMATION LOGIC --- */
        #left-hand, #right-hand { 
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); 
            transform-origin: center center;
        }

        /* 1. SENDER WAITING: Only Left Hand centered, Right Hand hidden */
        .waiting-sender #left-hand { transform: translateX(45px) rotate(0deg); }
        .waiting-sender #right-hand { transform: translateX(350px); opacity: 0; }

        /* 2. INVITATION: Hands pulled apart to create the gap */
        .invitation #left-hand { transform: translateX(-90px) rotate(-10deg); }
        .invitation #right-hand { transform: translateX(90px) rotate(10deg); opacity: 1; }

        /* 3. ACCEPTED: Hands slide into their perfect "Home" positions */
        .accepted #left-hand { animation: slideHome 1.8s ease-in-out forwards; }
        .accepted #right-hand { opacity: 1; animation: slideHome 1.8s ease-in-out forwards; }
        .accepted #sparkles { animation: popIn 2s forwards; }

        @keyframes slideHome { 
            0% { transform: translateX(var(--start-x, -90px)) rotate(var(--start-rot, -10deg)); }
            100% { transform: translateX(0) rotate(0deg); } 
        }
        /* Specific start positions for the "Home" animation */
        .accepted #left-hand { --start-x: -90px; --start-rot: -10deg; }
        .accepted #right-hand { --start-x: 90px; --start-rot: 10deg; }

        @keyframes popIn { 0%, 75% { opacity: 0; transform: scale(0.4); } 85% { opacity: 1; transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }

        /* Your Sparkle Twist/Twinkle animations */
        .sparkle-anim-1, .sparkle-anim-2, .sparkle-anim-3 { transform-box: fill-box; transform-origin: center; }
        .sparkle-anim-1 { animation: twinkle-1 3s infinite alternate ease-in-out 2s; }
        .sparkle-anim-2 { animation: twinkle-2 2.5s infinite alternate-reverse ease-in-out 2s; }
        .sparkle-anim-3 { animation: twinkle-3 3.5s infinite alternate ease-in-out 2s; }

        @keyframes twinkle-1 { 0% { transform: scale(1) rotate(0deg); opacity: 1; } 100% { transform: scale(0.8) rotate(15deg); opacity: 0.6; } }
        @keyframes twinkle-2 { 0% { transform: scale(1) rotate(0deg); opacity: 1; } 100% { transform: scale(1.2) rotate(-20deg); opacity: 0.7; } }
        @keyframes twinkle-3 { 0% { transform: scale(1) rotate(0deg); opacity: 1; } 50% { transform: scale(0.9) rotate(10deg); opacity: 0.8; } 100% { transform: scale(1.1) rotate(-5deg); opacity: 1; } }

        button { background-color: var(--accent); color: white; border: none; padding: 16px 38px; border-radius: 50px; font-weight: 700; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 15px rgba(211, 54, 130, 0.25); }
        button:hover { transform: scale(1.05); }

        #shareOverlay { display: none; position: fixed; bottom: 30px; background: #333; color: white; padding: 12px 20px; border-radius: 50px; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 100; font-size: 0.85rem; }
        #statusNote { font-size: 0.75rem; color: #aaa; margin-top: 15px; }
    </style>
</head>
<body>

<div class="container" id="mainContainer">
    <div id="loading">Gathering the promise...</div>
    <div id="content" style="display: none;">
        <h2 id="titleText"></h2>
        <p id="promiseText"></p>
        
        <div class="animation-area">
             <svg id="pinky-promise-animation" viewBox="-200 -50 912 612" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <g id="sparkle-positioner" transform="translate(110, -15) scale(0.5)">
                    <g id="sparkles">
                        <g class="sparkle-anim-1">
                            <path style="fill:#F9D366;" d="M284.682,405.593l6.398-1.297c8.444-1.712,8.444-13.781,0-15.493l-6.398-1.297c-16.119-3.268-28.717-15.866-31.985-31.985l-1.297-6.398c-1.712-8.444-13.781-8.444-15.493,0l-1.297,6.398c-3.268,16.119-15.866,28.717-31.985,31.985l-6.398,1.297c-8.444,1.712-8.444,13.781,0,15.493l6.398,1.297c16.119,3.268,28.717,15.866,31.985,31.985l1.297,6.398c1.712,8.444,13.781,8.444,15.493,0l1.297-6.398C255.965,421.459,268.563,408.861,284.682,405.593z"/>
                        </g>
                        <g class="sparkle-anim-2">
                            <path style="fill:#DD8833;" d="M397.203,445.72c-4.267,0-7.726-3.459-7.726-7.726v-20.92c0-4.267,3.459-7.726,7.726-7.726s7.726,3.459,7.726,7.726v20.92C404.929,442.261,401.47,445.72,397.203,445.72z"/><path style="fill:#DD8833;" d="M397.203,502.04c-4.267,0-7.726-3.459-7.726-7.726v-20.92c0-4.267,3.459-7.726,7.726-7.726s7.726,3.459,7.726,7.726v20.92C404.929,498.582,401.47,502.04,397.203,502.04z"/><path style="fill:#DD8833;" d="M435.823,463.421h-20.92c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S440.09,463.421,435.823,463.421z"/><path style="fill:#DD8833;" d="M379.502,463.421h-20.92c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S383.769,463.421,379.502,463.421z"/>
                        </g>
                        <g class="sparkle-anim-3">
                            <path style="fill:#DD8833;" d="M46.346,348.37c-4.267,0-7.726-3.459-7.726-7.726v-20.92c0-4.267,3.459-7.726,7.726-7.726s7.726,3.459,7.726,7.726v20.92C54.072,344.911,50.613,348.37,46.346,348.37z"/><path style="fill:#DD8833;" d="M46.346,404.691c-4.267,0-7.726-3.459-7.726-7.726v-20.92c0-4.267,3.459-7.726,7.726-7.726s7.726,3.459,7.726,7.726v20.92C54.072,401.232,50.613,404.691,46.346,404.691z"/><path style="fill:#DD8833;" d="M84.967,366.07h-20.92c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S89.234,366.07,84.967,366.07z"/><path style="fill:#DD8833;" d="M28.646,366.07H7.726c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S32.913,366.07,28.646,366.07z"/>
                        </g>
                        <g class="sparkle-anim-1">
                            <path style="fill:#DD8833;" d="M398.204,46.332c-4.267,0-7.726-3.459-7.726-7.726v-20.92c0-4.267,3.459-7.726,7.726-7.726c4.267,0,7.726,3.459,7.726,7.726v20.92C405.93,42.872,402.472,46.332,398.204,46.332z"/><path style="fill:#DD8833;" d="M398.204,102.652c-4.267,0-7.726-3.459-7.726-7.726V74.007c0-4.267,3.459-7.726,7.726-7.726c4.267,0,7.726,3.459,7.726,7.726v20.92C405.93,99.193,402.472,102.652,398.204,102.652z"/><path style="fill:#DD8833;" d="M436.825,64.032h-20.92c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S441.092,64.032,436.825,64.032z"/><path style="fill:#DD8833;" d="M380.504,64.032h-20.92c-4.267,0-7.726-3.459-7.726-7.726s3.459-7.726,7.726-7.726h20.92c4.267,0,7.726,3.459,7.726,7.726S384.771,64.032,380.504,64.032z"/>
                        </g>
                        <g class="sparkle-anim-2"><path style="fill:#F9D366;" d="M262.382,156.253l30.626-6.209c14.458-2.932,14.458-23.595,0-26.527l-30.626-6.209c-30.18-6.119-53.767-29.706-59.886-59.886l-6.209-30.626c-2.932-14.458-23.595-14.458-26.527,0l-6.209,30.626c-6.119,30.18-29.706,53.767-59.886,59.886l-30.626,6.209c-14.458,2.932-14.458,23.595,0,26.527l30.626,6.209c30.18,6.119,53.767,29.706,59.886,59.886l6.209,30.626c2.932,14.458,23.595,14.458,26.527,0l6.209-30.626C208.614,185.959,232.202,162.373,262.382,156.253z"/></g>
                        <g class="sparkle-anim-3"><path style="fill:#F9D366;" d="M480.152,262.816l23.52-4.769c11.104-2.251,11.104-18.121,0-20.372l-23.52-4.769c-23.178-4.7-41.292-22.813-45.991-45.991l-4.769-23.52c-2.251-11.104-18.121-11.104-20.371,0l-4.769,23.52c-4.7,23.178-22.813,41.292-45.991,45.991l-23.52,4.769c-11.104,2.251-11.104,18.121,0,20.372l23.52,4.769c23.178,4.7,41.292,22.813,45.991,45.991l4.769,23.52c2.251,11.104,18.121,11.104,20.371,0l4.769-23.52C438.861,285.63,456.976,267.515,480.152,262.816z"/></g>
                    </g>
                </g>

                <g id="right-hand">
                    <path d="m503.74 225.084 2.568 7.055c7.095 19.494 6.745 40.914-.989 60.154l-13.277 33.115 19.342 53.141c1.91 5.247-.796 11.05-6.043 12.96l-129.936 47.293c-5.247 1.91-11.05-.796-12.96-6.043l-19.342-53.141-26.907-29.395c-11.491-12.568-20.408-27.265-26.232-43.269l-73.894-202.99c-2.208-6.065-1.748-12.451.783-17.879 2.572-5.516 7.294-10.037 13.53-12.2 12.144-4.211 25.396 2.508 29.792 14.587l37.849 103.991 15.558 11.677 122.654-41.888 28.09 77.177z" fill="#d68a5a"/>
                    <path d="m288.072 165.129-24.864 68.31-39.28-107.903 15.354-42.197c1.302-3.573 3.125-6.854 5.364-9.781 6.864 2.031 12.708 7.177 15.343 14.416z" fill="#c47a4a"/>
                    <path d="m436.237 162.252 14.26 39.179-36.349 13.23c-.479 1.862-1.092 3.687-1.864 5.474-.201.507-.384.899-.485 1.117-4.318 9.26-11.947 16.242-21.513 19.724-8.268 3.009-16.913 2.962-24.702.435-4.352 6.947-10.941 12.55-19.209 15.559-19.739 7.184-41.64-3.028-48.824-22.767l-15.011-41.243c-4.175-11.471-2.481-23.668 3.55-33.286l18.393 50.533z" fill="#c47a4a"/>
                    <path d="m437.558 165.858-13.537-37.192c-4.414-12.128-17.825-18.381-29.953-13.967s-18.381 17.825-13.967 29.953l13.537 37.192z" fill="#d68a5a"/>
                    <path d="m437.557 165.858-43.922 15.987-13.536-37.188c-.606-1.665-1.005-3.353-1.215-5.041 3.572-2.809 7.662-5.119 12.182-6.765l29.337-10.678c1.502 1.905 2.739 4.082 3.618 6.497z" fill="#c47a4a"/>
                    <path d="m385.253 227.146c-12.123 4.412-25.538-1.833-29.954-13.968l-13.605-17.677-1.403-23.556c-2.208-6.067-1.746-12.46.781-17.879 2.527-5.42 7.131-9.871 13.187-12.075 6.876-2.503 14.15-1.58-19.968 1.893 4.458 2.662 8.072 6.816 9.986 12.074l15.008 41.233c2.139 5.877 1.775 12.058-.563 17.369-.059.17-.143.348-.218.511-2.527 5.419-7.12 9.866-13.187 12.075z" fill="#d68a5a"/>
                    <path d="m398.658 214.56c-14.799-2.239-27.958-12.296-33.431-27.333-.173-.476-.346-.952-.496-1.436-4.899-15.125-.807-30.976 9.496-41.907 4.458 2.662 8.072 6.816 9.986 12.074l15.008 41.233c2.139 5.877 1.775 12.059-.563 17.369z" fill="#c47a4a"/>
                    <path d="m355.305 213.182-15.011-41.242c-4.414-12.128-17.825-18.381-29.953-13.967-12.128 4.414-18.381 17.825-13.967 29.953l15.011 41.242c4.414 12.128 17.825 18.381 29.953 13.967 12.129-4.414 18.382-17.825 13.967-29.953z" fill="#d68a5a"/>
                    <path d="m340.292 171.939 15.012 41.246c2.206 6.06 1.752 12.447-.783 17.865-2.52 5.424-7.111 9.874-13.182 12.083-3.307 1.204-6.708 1.62-9.992 1.329 1.951-1.942 3.53-4.209 4.684-6.683 2.535-5.417 2.989-11.805.783-17.865l-15.012-41.246c-3.211-8.823-11.186-14.535-19.967-15.29 2.328-2.333 5.201-4.201 8.508-5.404 12.132-4.415 25.534 1.835 29.949 13.965z" fill="#c47a4a"/>
                    <path d="m475.204 146.685 31.104 85.457c7.095 19.492 6.746 40.908-.985 60.165l-13.279 33.093 19.344 53.146c1.91 5.247-.796 11.05-6.043 12.96l-58.075 21.138-43.934-120.707c-9.591-26.35 3.996-55.486 30.346-65.076l13.933-5.071-11.917-32.743-21.935 7.984c-13.677 4.978-28.847-2.344-33.378-16.317-4.315-13.315 3.157-27.609 16.312-32.397l46.057-16.763c13.139-4.783 27.668 1.992 32.45 15.131z" fill="#e89a5e"/>
                    <path d="m475.204 146.685 31.104 85.457c7.095 19.492 6.746 40.908-.985 60.165l-13.279 33.093 19.344 53.146c1.91 5.247-.796 11.05-6.043 12.96l-13.063 4.755-22.802-62.647 13.279-33.093c7.731-19.258 8.08-40.673.985-60.165l-31.104-85.457c-4.784-13.144-19.318-19.912-32.451-15.132l22.565-8.213c13.139-4.783 27.668 1.992 32.45 15.131z" fill="#d68a5a"/>
                </g>

                <g id="left-hand">
                    <path d="m8.26 225.084-2.568 7.055c-7.095 19.494-6.745 40.914.989 60.154l13.277 33.115-19.341 53.141c-1.91 5.247.796 11.05 6.043 12.96l129.936 47.293c5.247 1.91 11.05-.796 12.96-6.043l19.342-53.141 26.907-29.395c11.491-12.568 20.408-27.265 26.232-43.269l73.894-202.99c2.208-6.065 1.748-12.451-.783-17.879-2.572-5.516-7.294-10.037-13.53-12.2-12.144-4.211-25.396 2.508-29.792 14.587l-37.169 102.121-16.239 13.547-122.655-41.888-28.09 77.177z" fill="#fdd1a7"/>
                    <path d="m295.925 103.962-73.894 202.99c-5.825 16.004-14.741 30.701-26.232 43.269l-26.907 29.395-19.342 53.141c-1.91 5.247-7.712 7.953-12.96 6.043l-11.418-4.156 22.8-62.642 26.907-29.395c11.491-12.568 20.408-27.265 26.232-43.269l73.894-202.99c2.208-6.065 1.748-12.451-.783-17.879-.948-2.032-2.185-3.928-3.686-5.632 3.719-.55 7.632-.211 11.42 1.168 6.065 2.208 10.661 6.664 13.186 12.078 2.531 5.428 2.991 11.814.783 17.879z" fill="#ffbc8a"/>
                    <path d="m75.763 162.252-14.26 39.179 36.349 13.23c.479 1.862 1.092 3.687 1.864 5.474-.201.507-.384.899-.485 1.117-4.318 9.26-11.947 16.242-21.513 19.724-8.268 3.009-16.913 2.962-24.702.435-4.352 6.947-10.941 12.55-19.209 15.559-19.739 7.184-41.64-3.028-48.824-22.767l15.011-41.243c-4.175-11.471-2.481-23.668-3.55-33.286l-18.393 50.533z" fill="#ffbc8a"/>
                    <path d="m74.442 165.858 13.537-37.192c4.414-12.128 17.825-18.381 29.953-13.967s18.381 17.825 13.967 29.953l-13.537 37.192z" fill="#ffe5c4"/>
                    <path d="m74.443 165.858 43.922 15.987 13.536-37.188c-.606-1.665-1.005-3.353-1.215-5.041-3.572-2.809-7.662-5.119-12.182-6.765l-29.337-10.678c-1.502 1.905-2.739 4.082-3.618 6.497z" fill="#fdd1a7"/>
                    <path d="m200.615 229.168 15.011-41.243c4.414-12.128-1.839-25.539-13.968-29.953-12.128-4.414-25.539 1.839-29.953 13.968l-13.34 16.949-1.671 24.293c-4.414 12.128 1.839 25.539 13.968 29.953 12.129 4.415 25.539-1.839 29.953-13.967z" fill="#ffe5c4"/>
                    <path d="m215.625 187.924-15.012 41.246c-2.206 6.06-6.659 10.661-12.083 13.182-5.417 2.535-11.794 2.993-17.865.783-3.307-1.204-6.18-3.071-8.508-5.404 2.743-.234 5.41-.955 7.884-2.108 5.424-2.52 9.878-7.122 12.083-13.182l15.012-41.246c3.211-8.823.774-18.325-5.467-24.547 3.283-.291 6.684.125 9.992 1.329 12.129 4.414 18.379 17.816 13.964 29.947z" fill="#fdd1a7"/>
                    <path d="m126.747 227.146c12.123 4.412 25.538-1.833 29.954-13.968l15.008-41.233c2.208-6.067 1.746-12.46-.781-17.879-2.527-5.42-7.131-9.871-13.187-12.075-6.876-2.503-14.15-1.58-19.968 1.893-4.458 2.662-8.072 6.816-9.986 12.074l-15.008 41.233c-2.139 5.877-1.775 12.058.563 17.369-.059.17-.143.348-.218.511 2.528 5.419 7.12 9.866 13.187 12.075z" fill="#ffe5c4"/>
                    <path d="m171.713 171.943-15.015 41.233c-4.419 12.133-17.826 18.382-29.949 13.974-2.599-.95-4.924-2.305-6.936-3.984 10.071.627 19.777-5.359 23.407-15.329l15.005-41.233c2.214-6.077 1.749-12.467-.779-17.887-1.446-3.094-3.569-5.875-6.249-8.099 2.184.131 4.388.586 6.542 1.375 6.057 2.204 10.657 6.653 13.185 12.073s2.994 11.81.789 17.877z" fill="#fdd1a7"/>
                    <path d="m113.342 214.56c14.799-2.239 27.958-12.296-33.431-27.333-.173-.476-.346-.952-.496-1.436 4.899-15.125-.807-30.976-9.496-41.907-4.458 2.662-8.072 6.816-9.986 12.074l-15.008 41.233c-2.139 5.877-1.775 12.059-.563 17.369z" fill="#fdd1a7"/>
                    <path d="m36.796 146.685-31.104 85.457c-7.094 19.492-6.746 40.908.985 60.165l13.279 33.093-19.343 53.147c-1.91 5.247.796 11.05 6.043 12.96l58.075 21.138 43.934-120.707c9.591-26.35-3.996-55.486-30.346-65.076l-13.933-5.071 11.917-32.743 21.935 7.984c13.677 4.978 28.847-2.344 33.378-16.317 4.315-13.315-3.157-27.609-16.312-32.397l-46.057-16.763c-13.14-4.784-27.669 1.991-32.451 15.13z" fill="#ffe5c4"/>
                </g>
            </svg>
        </div>
        
        <button id="actionBtn" onclick="acceptPromise()">Pinky Promise</button>
        <div id="statusNote">Connecting...</div>
    </div>
</div>

<div id="shareOverlay">
    <span>Link ready! Send it to Dak:</span>
    <button onclick="copyRecipientLink()" style="background:var(--accent); color:white; border:none; border-radius:20px; margin-left:12px; padding:6px 15px; cursor:pointer; font-weight:bold;">Copy</button>
</div>

<script>
    const supabaseUrl = 'https://euollkzgqskcehpryzvk.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1b2xsa3pncXNrY2VocHJ5enZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIyNTY2MDYsImV4cCI6MjA4NzgzMjYwNn0.Vl-X_vrbaWlMUh_OeJe5tbHvcxkt_j4bjHMIZpRJZrc';
    const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

    let currentPromise = null;
    let alreadyConfettied = false;

    async function loadPromise() {
        const urlParams = new URLSearchParams(window.location.search);
        const { data } = await supabaseClient.from('promises').select('*').eq('slug', urlParams.get('id')).single();

        if (data) {
            currentPromise = data;
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            
            if (urlParams.get('new') === 'true' && urlParams.get('role') === 's' && !currentPromise.is_accepted) {
                document.getElementById('shareOverlay').style.display = 'flex';
            }

            updateUI(urlParams.get('role'));
            
            if (currentPromise.is_accepted) {
                if(!alreadyConfettied) {
                    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#d33682', '#F9D366'] });
                    alreadyConfettied = true;
                }
                return true; 
            }
        }
        return false;
    }

    function updateUI(role) {
        const container = document.getElementById('mainContainer');
        if (currentPromise.is_accepted) {
            container.className = "container accepted";
            document.getElementById('titleText').innerText = "It's Official! ðŸŽ‰";
            document.getElementById('actionBtn').style.display = 'none';
            document.getElementById('statusNote').style.display = 'none';
        } else if (role === 's') {
            container.className = "container waiting-sender";
            document.getElementById('titleText').innerText = "Pinky Extended...";
            document.getElementById('actionBtn').style.display = 'none';
            document.getElementById('statusNote').innerHTML = "Waiting for them... ðŸ“¡";
        } else {
            container.className = "container invitation";
            document.getElementById('titleText').innerText = `${currentPromise.sender_name} extends a pinky...`;
            document.getElementById('actionBtn').style.display = 'inline-block';
            document.getElementById('statusNote').innerText = "Check the promise below â†“";
        }
        document.getElementById('promiseText').innerText = `"${currentPromise.promise_text}"`;
    }

    async function acceptPromise() {
        await supabaseClient.from('promises').update({ is_accepted: true }).eq('slug', currentPromise.slug);
        loadPromise();
    }

    function copyRecipientLink() {
        const rLink = window.location.origin + "/promise/view.html?id=" + new URLSearchParams(window.location.search).get('id') + "&role=r";
        navigator.clipboard.writeText(rLink);
        alert("Copied! Send it to your friend.");
        document.getElementById('shareOverlay').style.display = 'none';
    }

    const interval = setInterval(async () => {
        const stop = await loadPromise();
        if (stop) clearInterval(interval);
    }, 3000);

    loadPromise();
</script>
</body>
</html>
